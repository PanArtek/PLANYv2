---
import Button from '../ui/Button.astro';
---

<section class="hero-minimalist relative overflow-hidden min-h-screen flex items-center" id="home">
  <!-- Minimalist Background - 70% white space -->
  <div class="hero-background absolute inset-0 pointer-events-none">
    <!-- Pure white background for minimalism -->
    <div class="absolute inset-0 bg-white"></div>
    
    <!-- Subtle geometric accents - positioned strategically -->
    <div class="geometric-accent-group absolute bottom-24 right-10 sm:right-20 flex gap-4 opacity-80">
      <div class="accent-triangle w-6 h-6 geometric-triangle" style="background: var(--accent-orange);"></div>
      <div class="accent-circle w-5 h-5 rounded-full" style="background: var(--primary-medium);"></div>
      <div class="accent-square w-4 h-4 transform rotate-45" style="background: var(--primary-dark);"></div>
      <div class="accent-hexagon w-5 h-5 geometric-hexagon" style="background: var(--primary-light);"></div>
    </div>
    
    <!-- Logo geometric accent -->
    <div class="logo-accent absolute top-8 left-4 sm:left-8 w-2 h-2 rounded-full" style="background: var(--neutral-light);"></div>
  </div>

  <!-- Hero Content - Modern Minimalist -->
  <div class="container mx-auto px-8 sm:px-12 lg:px-16 relative z-10">
    <div class="max-w-4xl text-center mx-auto">
      
      <!-- Main headline - Bold and impactful -->
      <h1 class="hero-title mb-8" style="
        font-size: clamp(56px, 10vw, 84px);
        font-weight: 700;
        line-height: 1.05;
        color: var(--primary-dark);
        letter-spacing: -0.03em;
        margin-bottom: 32px;
      ">
        Profesjonalne wykonawstwo<br>
        <span style="color: var(--primary-light);">na każdym etapie</span>
      </h1>
      
      <!-- Supporting text - Clean and focused -->
      <p class="hero-subtitle mb-16" style="
        font-size: 28px;
        font-weight: 400;
        line-height: 1.4;
        color: var(--neutral-dark);
        margin-bottom: 64px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      ">
        Własny zespół 20+ specjalistów<br>
        realizuje kompleksowo prace budowlane i instalacyjne
      </p>
      
      <!-- Main CTAs - Focused on two buttons -->
      <div class="hero-cta-group flex flex-col sm:flex-row gap-6 justify-center items-center mb-20">
        <a href="#kontakt" class="btn-geometric btn-primary-geometric text-xl px-12 py-5">
          Poproś o wycenę
        </a>
        <a href="#realizacje" class="btn-geometric btn-secondary-geometric text-xl px-12 py-5">
          Zobacz nasze realizacje
        </a>
      </div>
      
      <!-- Minimal trust indicators -->
      <div class="hero-trust-minimal flex justify-center gap-12 items-center opacity-70" style="
        padding-top: 40px;
        border-top: 1px solid var(--neutral-light);
        max-width: 600px;
        margin: 0 auto;
      ">
        <div class="trust-stat text-center">
          <div style="font-size: 24px; font-weight: 700; color: var(--primary-dark); margin-bottom: 4px;">17</div>
          <div style="font-size: 13px; color: var(--neutral-dark); text-transform: uppercase; letter-spacing: 0.5px;">lat doświadczenia</div>
        </div>
        <div class="trust-stat text-center">
          <div style="font-size: 24px; font-weight: 700; color: var(--primary-dark); margin-bottom: 4px;">20+</div>
          <div style="font-size: 13px; color: var(--neutral-dark); text-transform: uppercase; letter-spacing: 0.5px;">specjalistów</div>
        </div>
        <div class="trust-stat text-center">
          <div style="font-size: 24px; font-weight: 700; color: var(--primary-dark); margin-bottom: 4px;">100-5000m²</div>
          <div style="font-size: 13px; color: var(--neutral-dark); text-transform: uppercase; letter-spacing: 0.5px;">realizacje</div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Minimalist Hero with 70% white space */
  .hero-minimalist {
    position: relative;
    background: var(--white);
    min-height: 100vh;
    padding: 120px 0;
    display: flex;
    align-items: center;
  }

  /* Geometric accent animations - subtle for minimalism */
  .geometric-accent-group:hover .accent-triangle {
    transform: rotate(120deg);
    transition: transform 0.4s ease;
  }

  .geometric-accent-group:hover .accent-square {
    transform: rotate(90deg);
    transition: transform 0.4s ease;
  }

  .geometric-accent-group:hover .accent-circle {
    transform: scale(1.1);
    transition: transform 0.3s ease;
  }

  .geometric-accent-group:hover .accent-hexagon {
    transform: rotate(60deg);
    transition: transform 0.4s ease;
  }

  /* Modern minimalist typography */
  .hero-title {
    font-family: 'Inter', sans-serif;
    font-display: swap;
  }

  .hero-subtitle {
    font-family: 'Inter', sans-serif;
    font-display: swap;
  }

  /* Enhanced CTA buttons */
  .hero-cta-group .btn-geometric {
    min-width: 280px;
    font-weight: 600;
    transition: all 0.3s var(--ease-out);
  }

  .hero-cta-group .btn-primary-geometric {
    box-shadow: 0 8px 32px rgba(111, 36, 81, 0.2);
  }

  .hero-cta-group .btn-primary-geometric:hover {
    box-shadow: 0 12px 40px rgba(111, 36, 81, 0.3);
    transform: translateY(-3px);
  }

  .hero-cta-group .btn-secondary-geometric:hover {
    box-shadow: 0 8px 24px rgba(111, 36, 81, 0.15);
    transform: translateY(-2px);
  }

  /* Trust indicators styling */
  .trust-stat {
    transition: all 0.3s var(--ease-out);
  }

  .trust-stat:hover {
    opacity: 1;
    transform: translateY(-2px);
  }

  /* Responsive adjustments for mobile */
  @media (max-width: 768px) {
    .hero-minimalist {
      padding: 100px 0 80px 0;
    }
    
    .hero-title {
      font-size: 48px !important;
      margin-bottom: 24px !important;
    }
    
    .hero-subtitle {
      font-size: 22px !important;
      margin-bottom: 48px !important;
    }
    
    .hero-cta-group {
      flex-direction: column;
      gap: 16px !important;
    }
    
    .hero-cta-group .btn-geometric {
      min-width: 100%;
      max-width: 320px;
    }
    
    .geometric-accent-group {
      position: static !important;
      justify-content: center;
      margin-top: 48px;
      opacity: 0.5 !important;
    }
    
    .hero-trust-minimal {
      gap: 32px !important;
      flex-wrap: wrap;
    }
    
    .trust-stat {
      min-width: 80px;
    }
  }

  /* Fallback for when JavaScript fails */
  .hero-title,
  .hero-subtitle,
  .hero-cta-group,
  .hero-trust-minimal,
  .geometric-accent-group {
    opacity: 1;
    transform: translateY(0);
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .geometric-accent-group:hover .accent-triangle,
    .geometric-accent-group:hover .accent-square,
    .geometric-accent-group:hover .accent-circle,
    .geometric-accent-group:hover .accent-hexagon {
      transform: none;
      transition: none;
    }
    
    .hero-title,
    .hero-subtitle,
    .hero-cta-group,
    .hero-trust-minimal,
    .geometric-accent-group {
      opacity: 1 !important;
      transform: translateY(0) !important;
    }
  }
</style>

<script type="module">
  function initMinimalistHeroAnimations() {
    // Check if GSAP is available
    if (typeof gsap === 'undefined') {
      console.warn('GSAP not loaded, skipping hero animations');
      // Show elements immediately if GSAP fails
      document.querySelectorAll('.hero-title, .hero-subtitle, .hero-cta-group, .hero-trust-minimal, .geometric-accent-group').forEach(el => {
        if (el) {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }
      });
      return;
    }

    // Check for reduced motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) {
      // Show all elements immediately
      gsap.set(['.hero-title', '.hero-subtitle', '.hero-cta-group', '.hero-trust-minimal', '.geometric-accent-group'], {
        autoAlpha: 1,
        y: 0
      });
      return;
    }

    const tl = gsap.timeline({ delay: 0.5 });

    // 1. Set initial states for modern hero
    gsap.set(['.hero-title', '.hero-subtitle', '.hero-cta-group', '.hero-trust-minimal', '.geometric-accent-group'], {
      autoAlpha: 0,
      y: 30,
      force3D: true
    });

    // 2. Modern entrance sequence with stagger
    tl.to('.hero-title', {
      duration: 0.8,
      autoAlpha: 1,
      y: 0,
      ease: 'power3.out',
      force3D: true
    })
    .to('.hero-subtitle', {
      duration: 0.6,
      autoAlpha: 1,
      y: 0,
      ease: 'power2.out',
      force3D: true
    }, '-=0.4')
    .to('.hero-cta-group', {
      duration: 0.5,
      autoAlpha: 1,
      y: 0,
      ease: 'power2.out',
      force3D: true
    }, '-=0.3')
    .to('.hero-trust-minimal', {
      duration: 0.4,
      autoAlpha: 1,
      y: 0,
      ease: 'power2.out',
      force3D: true
    }, '-=0.2')
    .to('.geometric-accent-group', {
      duration: 0.4,
      autoAlpha: 1,
      y: 0,
      ease: 'power2.out',
      force3D: true
    }, '-=0.2');

    // 3. Setup button interactions
    setupButtonInteractions();
    
    // 4. Setup smooth scroll
    setupSmoothScroll();
  }

  function setupButtonInteractions() {
    const buttons = document.querySelectorAll('.hero-cta-group .btn-geometric');
    
    buttons.forEach(button => {
      button.addEventListener('mouseenter', () => {
        if (typeof gsap !== 'undefined') {
          gsap.to(button, { scale: 1.05, duration: 0.3, ease: 'power2.out' });
        }
      });
      
      button.addEventListener('mouseleave', () => {
        if (typeof gsap !== 'undefined') {
          gsap.to(button, { scale: 1, duration: 0.3, ease: 'power2.out' });
        }
      });
    });
  }

  function setupSmoothScroll() {
    const heroButtons = document.querySelectorAll('.hero-cta-group a[href^="#"]');
    heroButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = button.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          const navbar = document.querySelector('nav') || document.getElementById('navbar');
          const navHeight = navbar ? navbar.offsetHeight : 80;
          const targetPosition = targetElement.offsetTop - navHeight - 20;
          
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        }
      });
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMinimalistHeroAnimations);
  } else {
    initMinimalistHeroAnimations();
  }
</script>