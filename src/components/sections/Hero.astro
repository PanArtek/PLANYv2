---
import Button from '../ui/Button.astro';
---

<section class="hero-organic section-organic relative overflow-hidden min-h-screen flex items-center" id="home">
  <!-- Modern Organic Background -->
  <div class="hero-background absolute inset-0 pointer-events-none">
    <!-- Premium organic gradient -->
    <div class="absolute inset-0 bg-gradient-to-br from-neutral-50 via-primary-50 to-neutral-100"></div>
    
    <!-- Abstract organic shapes - flowing design -->
    <div class="organic-decoration organic-decoration-1 absolute top-20 right-16 animate-float opacity-40"></div>
    <div class="organic-decoration organic-decoration-2 absolute bottom-32 left-20 animate-organic opacity-30"></div>
    <div class="organic-decoration organic-decoration-3 absolute top-1/2 right-1/4 animate-pulse-organic opacity-25"></div>
    
    <!-- Floating organic accent -->
    <div class="organic-accent absolute top-10 left-8 w-4 h-4 bg-coral-400 rounded-full animate-flow opacity-60"></div>
    <div class="organic-accent absolute bottom-20 right-8 w-3 h-3 bg-lavender-400 rounded-full animate-organic opacity-50"></div>
  </div>

  <!-- Hero Content - Modern Organic -->
  <div class="container-custom relative z-10">
    <div class="max-w-5xl text-center mx-auto">
      
      <!-- Main headline - Bold and contemporary -->
      <h1 class="hero-title font-heading font-extrabold text-primary-700 mb-8 animate-fade-in" style="
        font-size: clamp(3rem, 8vw, 5rem);
        line-height: 1.1;
        letter-spacing: -0.03em;
      ">
        Profesjonalne wykonawstwo<br>
        <span class="text-gradient-hero inline-block">na każdym etapie</span>
      </h1>
      
      <!-- Supporting text - Premium feel -->
      <p class="hero-subtitle text-xl md:text-2xl text-neutral-600 font-medium mb-12 max-w-2xl mx-auto animate-slide-up">
        Własny zespół <span class="text-primary-600 font-semibold">20+ specjalistów</span><br>
        realizuje kompleksowo prace budowlane i instalacyjne
      </p>
      
      <!-- Modern Organic CTAs -->
      <div class="hero-cta-group flex flex-col sm:flex-row gap-6 justify-center items-center mb-16 animate-scale-in">
        <Button 
          variant="primary-hero" 
          href="#kontakt"
          class="btn-primary-hero shadow-organic transition-all duration-500 hover:shadow-coral"
          aria-label="Skontaktuj się z nami w celu umówienia bezpłatnej wyceny"
        >
          Poproś o wycenę
        </Button>
        <Button 
          variant="secondary-hero" 
          href="#realizacje"
          class="btn-secondary-hero glass-premium transition-all duration-500"
          aria-label="Sprawdź nasze dotychczasowe realizacje projektów"
        >
          Zobacz nasze realizacje
        </Button>
      </div>
      
      <!-- Modern trust indicators -->
      <div class="hero-trust-modern bg-white/50 backdrop-blur-sm rounded-organic-lg p-8 max-w-2xl mx-auto border border-primary-100 animate-slide-up">
        <div class="flex justify-center gap-8 md:gap-12 items-center">
          <div class="trust-stat text-center">
            <div class="text-3xl font-bold text-primary-700 mb-1">17</div>
            <div class="text-sm text-neutral-500 uppercase tracking-wider">lat doświadczenia</div>
          </div>
          <div class="w-px h-12 bg-primary-200"></div>
          <div class="trust-stat text-center">
            <div class="text-3xl font-bold text-primary-700 mb-1">20+</div>
            <div class="text-sm text-neutral-500 uppercase tracking-wider">specjalistów</div>
          </div>
          <div class="w-px h-12 bg-primary-200"></div>
          <div class="trust-stat text-center">
            <div class="text-3xl font-bold text-primary-700 mb-1">100-5000m²</div>
            <div class="text-sm text-neutral-500 uppercase tracking-wider">realizacje</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Modern Organic Hero - 2025 Design */
  .hero-organic {
    position: relative;
    min-height: 100vh;
    padding: 140px 0 100px;
    display: flex;
    align-items: center;
  }

  /* Organic decoration animations */
  .organic-decoration:hover {
    transform: scale(1.1) rotate(5deg);
    transition: all 0.6s var(--ease-organic);
  }

  /* Modern typography */
  .hero-title {
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-display: swap;
  }

  .hero-subtitle {
    font-family: 'Inter', sans-serif;
    font-display: swap;
  }

  /* Enhanced organic buttons */
  .hero-cta-group .btn-primary-hero {
    min-width: 240px;
    font-weight: 700;
    transform: translateY(0);
    transition: all 0.5s var(--ease-organic);
  }

  .hero-cta-group .btn-secondary-hero {
    min-width: 240px;
    font-weight: 600;
    transition: all 0.5s var(--ease-organic);
  }

  .hero-cta-group .btn-primary-hero:hover {
    transform: translateY(-4px) scale(1.02);
  }

  .hero-cta-group .btn-secondary-hero:hover {
    transform: translateY(-3px) scale(1.02);
  }

  /* Trust indicators with organic styling */
  .trust-stat {
    transition: all 0.4s var(--ease-organic);
  }

  .trust-stat:hover {
    transform: translateY(-2px) scale(1.05);
  }

  .hero-trust-modern {
    transition: all 0.6s var(--ease-organic);
  }

  .hero-trust-modern:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 60px rgba(74, 155, 94, 0.15);
  }

  /* Responsive design for mobile */
  @media (max-width: 768px) {
    .hero-organic {
      padding: 120px 0 80px;
    }
    
    .hero-cta-group {
      flex-direction: column;
      gap: 1rem !important;
    }
    
    .hero-cta-group .btn-primary-hero,
    .hero-cta-group .btn-secondary-hero {
      width: 100%;
      max-width: 320px;
    }
    
    .hero-trust-modern {
      padding: 1.5rem !important;
      margin-top: 2rem;
    }
    
    .hero-trust-modern .flex {
      gap: 1.5rem !important;
      flex-wrap: wrap;
    }
    
    .organic-decoration {
      opacity: 0.2 !important;
      animation: none;
    }
  }

  /* Fallback styles */
  .hero-title,
  .hero-subtitle,
  .hero-cta-group,
  .hero-trust-modern {
    opacity: 1;
    transform: translateY(0);
  }

  /* Accessibility - Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .organic-decoration,
    .organic-accent {
      animation: none !important;
    }
    
    .hero-title,
    .hero-subtitle,
    .hero-cta-group,
    .hero-trust-modern {
      opacity: 1 !important;
      transform: translateY(0) !important;
    }
  }
</style>

<script type="module">
  function initOrganicHeroAnimations() {
    // Check if GSAP is available
    if (typeof gsap === 'undefined') {
      console.warn('GSAP not loaded, showing elements immediately');
      // Show elements immediately if GSAP fails
      document.querySelectorAll('.hero-title, .hero-subtitle, .hero-cta-group, .hero-trust-modern, .organic-decoration').forEach(el => {
        if (el) {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }
      });
      return;
    }

    // Check for reduced motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) {
      // Show all elements immediately
      gsap.set(['.hero-title', '.hero-subtitle', '.hero-cta-group', '.hero-trust-modern', '.organic-decoration'], {
        autoAlpha: 1,
        y: 0,
        scale: 1
      });
      return;
    }

    const tl = gsap.timeline({ delay: 0.3 });

    // 1. Set initial states for organic hero
    gsap.set(['.hero-title', '.hero-subtitle', '.hero-cta-group', '.hero-trust-modern'], {
      autoAlpha: 0,
      y: 20,
      scale: 0.98,
      force3D: true
    });

    gsap.set('.organic-decoration', {
      autoAlpha: 0,
      scale: 0.8,
      rotation: -10,
      force3D: true
    });

    // 2. Organic entrance sequence with natural flow
    tl.to('.hero-title', {
      duration: 1,
      autoAlpha: 1,
      y: 0,
      scale: 1,
      ease: 'power3.out',
      force3D: true
    })
    .to('.hero-subtitle', {
      duration: 0.8,
      autoAlpha: 1,
      y: 0,
      scale: 1,
      ease: 'power2.out',
      force3D: true
    }, '-=0.5')
    .to('.hero-cta-group', {
      duration: 0.7,
      autoAlpha: 1,
      y: 0,
      scale: 1,
      ease: 'back.out(1.2)',
      force3D: true
    }, '-=0.4')
    .to('.hero-trust-modern', {
      duration: 0.6,
      autoAlpha: 1,
      y: 0,
      scale: 1,
      ease: 'power2.out',
      force3D: true
    }, '-=0.3')
    .to('.organic-decoration', {
      duration: 0.8,
      autoAlpha: 1,
      scale: 1,
      rotation: 0,
      ease: 'power2.out',
      stagger: 0.1,
      force3D: true
    }, '-=0.6');

    // 3. Setup organic interactions
    setupOrganicInteractions();
    
    // 4. Setup smooth scroll
    setupSmoothScroll();
  }

  function setupOrganicInteractions() {
    const buttons = document.querySelectorAll('.hero-cta-group [class*="btn-"]');
    const decorations = document.querySelectorAll('.organic-decoration');
    
    // Enhanced button interactions
    buttons.forEach(button => {
      button.addEventListener('mouseenter', () => {
        if (typeof gsap !== 'undefined') {
          gsap.to(button, { 
            scale: 1.02, 
            y: -3,
            duration: 0.4, 
            ease: 'power2.out' 
          });
        }
      });
      
      button.addEventListener('mouseleave', () => {
        if (typeof gsap !== 'undefined') {
          gsap.to(button, { 
            scale: 1, 
            y: 0,
            duration: 0.4, 
            ease: 'power2.out' 
          });
        }
      });
    });

    // Organic decoration interactions
    decorations.forEach((decoration, index) => {
      if (typeof gsap !== 'undefined') {
        gsap.to(decoration, {
          rotation: index % 2 === 0 ? 5 : -5,
          duration: 4 + index,
          ease: 'power1.inOut',
          repeat: -1,
          yoyo: true
        });
      }
    });
  }

  function setupSmoothScroll() {
    const heroButtons = document.querySelectorAll('.hero-cta-group a[href^="#"]');
    heroButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = button.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          const navbar = document.querySelector('nav') || document.getElementById('navbar');
          const navHeight = navbar ? navbar.offsetHeight : 80;
          const targetPosition = targetElement.offsetTop - navHeight - 20;
          
          // Enhanced scroll with GSAP if available
          if (typeof gsap !== 'undefined') {
            gsap.to(window, {
              duration: 1.2,
              scrollTo: targetPosition,
              ease: 'power2.inOut'
            });
          } else {
            window.scrollTo({
              top: targetPosition,
              behavior: 'smooth'
            });
          }
        }
      });
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initOrganicHeroAnimations);
  } else {
    initOrganicHeroAnimations();
  }
</script>